System.register("chunks:///_virtual/AudioPayerH5.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],function(t){var n,i,r,s,l,u,c,h;return{setters:[function(e){n=e.inheritsLoose},function(e){i=e.cclegacy,r=e._decorator,s=e.assetManager,l=e.AudioClip,u=e.AudioSource,c=e.resources},function(e){h=e.Logger}],execute:function(){i._RF.push({},"4eea3aUbnxB2KSlkMQp9m5C","AudioPayerH5",void 0);var a,e=r.ccclass;function o(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))||this).isMute=!1,e.saveMuteState=!1,e.saveVolume=1,e.userTouch=!1,e}r.property,t("AudioPlayerH5",e((n(o,a=u),o.preloadRemoteAudio=function(n,i){void 0===i&&(i=null),s.loadRemote(n,function(e,t){e?h.error("preloadRemoteAudio_error:",e.message,n):(o.audioClipMap.set(n,t),i&&i(n))})},o.clearRemoteAudio=function(e){var t=o.audioClipMap.get(e);return!!t&&(s.releaseAsset(t),o.audioClipMap.delete(e))},o.clearAll=function(){o.audioClipMap.forEach(function(e,t){o.audioClipMap.delete(t),s.releaseAsset(e)})},(e=o.prototype).playAudioClip=function(e,t){this.userTouch&&(this.updateMuteState(),this.clip=e,this.loop=t,this.isValid)&&this.play()},e.playRemoteMusic=function(n,i){var e,a=this;o.audioClipMap.has(n)?(e=o.audioClipMap.get(n),this.playAudioClip(e,i)):s.loadRemote(n,function(e,t){e?h.error("playRemoteMusic_error:",e.message,n):(o.audioClipMap.set(n,t),a.userTouch&&a.playAudioClip(t,i))})},e.playLocalMusic=function(n,i,e){var a=this;(e=void 0===e?c:e).load(n,l,function(e,t){e?h.error("playLocalMusic_error:",e.message,n):a.userTouch&&a.playAudioClip(t,i)})},e.setMute=function(e){this.isMute=e,this.updateMuteState()},e.updateMuteState=function(){this.isMute?this.volume=0:this.volume=this.saveVolume},e.myPlayOneShot=function(e,t){this.userTouch&&this.playOneShot(e,t)},e.playRemoteEffect=function(n){var e,i=this;o.audioClipMap.has(n)?(e=o.audioClipMap.get(n),this.myPlayOneShot(e)):s.loadRemote(n,function(e,t){e?h.error("playRemoteEffect_error:",e.message,n):(o.audioClipMap.set(n,t),i.updateMuteState(),i.myPlayOneShot(t))})},e.playLocalEffect=function(n,e){var i=this;(e=void 0===e?c:e).load(n,l,function(e,t){e?h.error("playLocalEffect_error:",e.name,e.message,e.stack,n):(i.updateMuteState(),i.myPlayOneShot(t))})},(e=o).audioClipMap=new Map,e=e))||e),i._RF.pop()}}}),System.register("chunks:///_virtual/BottomAreaView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalContext.ts","./Utils.ts"],function(i){var a,o,r,s,l,u,c;return{setters:[function(e){a=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,s=e.Widget,l=e.Component},function(e){u=e.globalContext},function(e){c=e.default}],execute:function(){o._RF.push({},"89ba8U/gqlKi4qypMyfDLuM","BottomAreaView",void 0);var e,t=r.ccclass;function n(){return e.apply(this,arguments)||this}r.property,i("BottomAreaView",t("BottomAreaView")((a(n,e=l),n.prototype.onLoad=function(){var e;null!=(e=window)&&null!=(e=e.navigator)&&null!=(e=e.userAgent)&&e.includes("deviceType/1")&&(u.isIOSFullScreen=!0,e=this.node.getComponent(s))&&(e.bottom=c.getBottomArea())},t=n))||t),o._RF.pop()}}}),System.register("chunks:///_virtual/CachePool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){function i(){}n._RF.push({},"52066ScK/BI2LtGmgDE1PgI","CachePool",void 0),e("CachePool",(i.addObj=function(e,t){var n;Object.prototype.hasOwnProperty.call(i.pool,e)?i.pool[e].push(t):((n=[]).push(t),i.pool[e]=n)},i.delObj=function(e){return Object.prototype.hasOwnProperty.call(i.pool,e)?i.pool[e].pop():null},i.getObj=function(e){return Object.prototype.hasOwnProperty.call(i.pool,e)?i.pool[e][0]:null},i.hasObj=function(e){e=i.pool[e];return!!(e&&0<e.length)},i.clean=function(e){delete i.pool[e]},i.cleanAll=function(){i.pool={}},t(i,null,[{key:"getPool",get:function(){return this.pool}}]),i)).pool={},n._RF.pop()}}}),System.register("chunks:///_virtual/CommonInterface.ts",["cc"],function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c97beOlyDxJU69a+toZPYVa","CommonInterface",void 0),t._RF.pop()}}}),System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts"],function(n){var h,i,a;return{setters:[function(e){h=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy},function(e){a=e.default}],execute:function(){i._RF.push({},"e8cac4Y3D9A3Jwybbr5K9C1","EventManager",void 0);t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},(e=t.prototype).destroy=function(){this._eventListeners.clear()},e.getEventListenersIndex=function(e,t,n){var i=-1,a=this._eventListeners.get(e);if(a)for(var o=0;o<a.length;o++){var r=a[o];if(r.callBack===t&&(!n||r.target===n)){i=o;break}}return i},e.addEventListener=function(e,t,n){var i;return!a.isEmpty(e)&&null!=t&&(!(i={callBack:t,target:n})===this._eventListeners.has(e)?this._eventListeners.set(e,[i]):-1===this.getEventListenersIndex(e,t,n)&&this._eventListeners.get(e).push(i),!0)},e.removeEventListener=function(e,t,n){null!=this._eventListeners.has(e)&&-1!==(t=this.getEventListenersIndex(e,t,n))&&this._eventListeners.get(e).splice(t,1)},e.dispatchEvent=function(e){if(this._eventListeners.has(e)){for(var t=[],n=h(this._eventListeners.get(e));!(i=n()).done;){var i=i.value;t.push({callBack:i.callBack,target:i.target})}for(var a=arguments.length,o=new Array(1<a?a-1:0),r=1;r<a;r++)o[r-1]=arguments[r];for(var s=0,l=t;s<l.length;s++){var u,c=l[s];(u=c.callBack).call.apply(u,[c.target].concat(o))}}};var e=t;function t(){this._eventListeners=new Map}e.instance=null,n("EventMgr",e.getInstance()),i._RF.pop()}}}),System.register("chunks:///_virtual/EventType.ts",["cc"],function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"7f769zWM+tDdIsz9IrK9fb+","EventType",void 0),e("EventType",{ONE_WIN_OPEN_COMPLE:"ONE_WIN_OPEN_COMPLE",NATIVE_VIEW_MINI_STATUS:"minimized_room_in_game",NATIVE_ACTIVITY_STATUS_CHANGE:"activity_status_change",NATIVE_GAME_MUSIC_STATUS_CHANGE:"game_music_status_change",NATIVE_GAME_SOUND_STATUS_CHANGE:"game_sound_status_change",NATIVE_MIC_SOUND_UPDATE:"mic_sound_update",NATIVE_MIC_VOLUME_CHANGE:"mic_status",SOCKET_ON_OPEN:"SOCKET_ON_OPEN",SOCKET_ON_MESSAGE:"SOCKET_ON_MESSAGE",SOCKET_LOGIN_RESP:"SOCKET_LOGIN_RESP",SOCKET_CLOSE_GAME:"SOCKET_CLOSE_GAME",SOCKET_EMOJI_CONFIG_RESP:"SOCKET_EMOJI_CONFIG_RESP",SOCKET_EMOJI_RESP:"SOCKET_EMOJI_RESP",SOCKET_GIFT_CONFIG_RESP:"SOCKET_GIFT_CONFIG_RESP",SOCKET_GIFT_RESP:"SOCKET_GIFT_RESP",SOCKET_ASSET_UPDATE_RESP:"SOCKET_ASSET_UPDATE_RESP",GAME_SOCKET_MESSAGE:"GAME_SOCKET_MESSAGE"}),t._RF.pop()}}}),System.register("chunks:///_virtual/FrameLoad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],function(o){var r,s,l,u,c,h,d;return{setters:[function(e){r=e.inheritsLoose,s=e.regeneratorRuntime,l=e.asyncToGenerator},function(e){u=e.cclegacy,c=e._decorator,h=e.Component},function(e){d=e.Logger}],execute:function(){u._RF.push({},"d4c14BD2xlELYrdPr4bZcGu","FrameLoad",void 0);var e,i,a,t=c.ccclass;function n(){return e.apply(this,arguments)||this}c.property,o("FrameLoad",t((r(n,e=h),n.get=function(e){return e?e.getComponent(n)||e.addComponent(n):(d.warn("FrameLoad: targetNode is null"),null)},(t=n.prototype).load=(a=l(s().mark(function e(t,n,i){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=8),e.next=3,this.executePreFrame(this._getItemGenerator(t,n),i);case 3:case"end":return e.stop()}},e,this)})),function(e,t,n){return a.apply(this,arguments)}),t.loadForLen=(i=l(s().mark(function e(t,n,i){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=8),e.next=3,this.executePreFrame(this._getItemGeneratorForLen(t,n),i);case 3:case"end":return e.stop()}},e,this)})),function(e,t,n){return i.apply(this,arguments)}),t._getItemGeneratorForLen=s().mark(function e(t,n){var i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(i<t)return e.next=4,n(i);e.next=7;break;case 4:i++,e.next=1;break;case 7:case"end":return e.stop()}},e)}),t._getItemGenerator=s().mark(function e(t,n){var i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(i<t.length)return e.next=4,n(t[i],i);e.next=7;break;case 4:i++,e.next=1;break;case 7:case"end":return e.stop()}},e)}),t.executePreFrame=function(t,o){var r=this;return new Promise(function(i,e){var a=t;!function e(){for(var t=Date.now(),n=a.next();;n=a.next()){if(null==n||n.done)return i(),0;if(Date.now()-t>o)return r.scheduleOnce(function(){e()}),0}}()})},t=n))||t),u._RF.pop()}}}),System.register("chunks:///_virtual/GameBackground.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.cjs","./index.js","./GlobalContext.ts","./Logger.ts","./ImageAdapter.ts","./UIView.ts","./EventManager.ts","./Utils.ts","./UIManager.ts","./TimeUtil.ts","./index.cjs"],function(n){var i,o,r,s,l,u,c,h,d,p,g,f,m,_;return{setters:[function(e){i=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,s=e.UITransform},null,function(e){l=e.closeLoadingPage},function(e){u=e.globalContext},function(e){c=e.Logger},function(e){h=e.ImageAdapter},function(e){d=e.UIView},function(e){p=e.EventMgr},function(e){g=e.default},function(e){f=e.uiManager},function(e){m=e.TimeUtil},function(e){_=e.default}],execute:function(){o._RF.push({},"e500fhd8iVNxYF8TcOSmRZa","GameBackground",void 0);var a,e=r.ccclass;function t(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))||this).bg=void 0,e}r.property,n("GameBackground",e("GameBackground")((i(t,a=d),(e=t.prototype).onLoad=function(){this.bg=this.node.getChildByName("bg")},e.onEnable=function(){a.prototype.onEnable.call(this),p.addEventListener("updateBackground",this.updateBackground,this)},e.onDisable=function(){a.prototype.onDisable.call(this),p.removeEventListener("updateBackground",this.updateBackground,this)},e.start=function(){var e=this;this.scheduleOnce(function(){e.gameDisplay()},0)},e.gameDisplay=function(){l();var e=m.getDuration();null!=_&&_.ReportGameDisplayed({duration:e,game_version:window.Version,gameId:u.gameId,startTimes:u.startTimes,url:window.location.href}),c.log(this.node.name,"event_h5game_displayed",e)},e.updateBackground=function(e){var t;e&&this.bg&&(t=this.bg.getComponent(s),0<e.height&&e.height!==t.height&&(t.height=e.height),g.isEmpty(e.imagePath)||h.get(this.bg).loadSpriteFrame(e.imagePath,null,null,null,f.curGameBundle))},e=t))||e),o._RF.pop()}}}),System.register("chunks:///_virtual/GameGlobal.ts",["cc"],function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2e359cslrNNzKQbNr83N/QK","GameGlobal",void 0),e("gameGlobal",{gameName:"crazyFruit",betVersion:2,gameResName:"fe-game-res-crazy-fruit-yr",gameRankNumLenght:9}),t._RF.pop()}}}),System.register("chunks:///_virtual/GameUIConfig.ts",["cc"],function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"24a81y7CklA865sFr8HzjGC","GameUIConfig",void 0),e("GameUIID",{gameMain:"prefab/gameMain",gameRank:"prefab/gameRank",gameRankAward:"prefab/gameRankAward",gameRecord:"prefab/gameRecord",gameRule:"prefab/gameRule",gameSettle:"prefab/gameSettle"}),t._RF.pop()}}}),System.register("chunks:///_virtual/GameUIConfig2.ts",["cc"],function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3eba6PxColMK7W+aJ/eMSUt","GameUIConfig",void 0),e("UILayerType",{BACKGROUND_LAYER:0,MAIN_LAYER:1,TIP_LAYER:2,TOP_LAYER:3}),t._RF.pop()}}}),System.register("chunks:///_virtual/GlobalContext.ts",["cc"],function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c7f182HvCNK6pm5l7HWt24Y","GlobalContext",void 0),e("globalContext",{IOSFullScreenHeight:88,GameForeground:!0,userInfo:null,isRTM:!0,systemError:!1,isMiniView:!1,isLowModel:!1}),t._RF.pop()}}}),System.register("chunks:///_virtual/ImageAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./Utils.ts"],function(i){var o,r,s,l,u,c,h,d,p,g,f,m,_;return{setters:[function(e){o=e.inheritsLoose,r=e.createClass},function(e){s=e.cclegacy,l=e._decorator,u=e.Sprite,c=e.SpriteFrame,h=e.resources,d=e.SpriteAtlas,p=e.assetManager,g=e.Texture2D,f=e.Component},function(e){m=e.Logger},function(e){_=e.default}],execute:function(){s._RF.push({},"dcccfZ8cx5Ph5tMcl3Bf6+T","ImageAdapter",void 0);var a,e=l.ccclass,t=(l.property,l.requireComponent);function n(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))||this)._url=null,e._resName=null,e._loadComplete=null,e._loadErrorFun=null,e._loadCompleteThisObj=null,e._loadCompleteParam=null,e._sprite=void 0,e}i("ImageAdapter",e(t=t(u)((o(n,a=f),n.get=function(e){return e.getComponent(n)||e.addComponent(n)},(e=n.prototype).onDestroy=function(){this.clear()},e.getSprite=function(){return this._sprite||(this._sprite=this.node.getComponent(u)),this._sprite},e.getUrl=function(){return this._url},e.loadSpriteFrame=function(e,t,n,i,a,o){this._loadResource(e,c,t=void 0===t?null:t,o=void 0===o?null:o,n=void 0===n?null:n,i=void 0===i?null:i,a=void 0===a?null:a,"/spriteFrame")},e.loadSpriteAtlas=function(e,t,n,i,a,o){this._setLoadParams(e,n=void 0===n?null:n,o=void 0===o?null:o,i=void 0===i?null:i,a=void 0===a?null:a),this._resName=t,h.load(e,d,this._loadSpriteAtlasComplete.bind(this,e,t))},e.loadImageByHttps=function(e,t,n,i,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=null),_.isEmpty(e)||this._url!==e&&(this._setLoadParams(e,t,a,n,i),p.loadRemote(e,{ext:".png"},this._loadImageByHttpsComplete.bind(this,e)))},e._loadResource=function(e,t,n,i,a,o,r,s){e+=s;this._url!==e&&(this._setLoadParams(e,n,i,a,o),r.load(e,t,this._loadResourceComplete.bind(this,e,t)))},e._loadResourceComplete=function(e,t,n,i){var a;this._url===e&&(n?(this._loadErrorFun&&this._loadErrorFun.call(this._loadCompleteThisObj),m.error(null==(a=this.node)?void 0:a.name,"load"+t.name+"ByLocation_error",e,n)):this.setSpiteFrame(i))},e._loadSpriteAtlasComplete=function(e,t,n,i){this._url===e&&this._resName===t&&(n&&m.log("loadSpriteAtlasComplete_error",n,e),this.setSpiteFrame(i.getSpriteFrame(this._resName)))},e._loadImageByHttpsComplete=function(e,t,n){t&&this._loadErrorFun?this._loadErrorFun.call(this._loadCompleteThisObj):this.loadImageByHttpsComplete(e,t,n)},e.loadImageByHttpsComplete=function(e,t,n){!t&&n?(n=this._createSpriteFrame(n),this.setSpiteFrame(n)):m.error(null==(n=this.node)?void 0:n.name,"loadImageByHttp_error",e,t)},e.setSpiteFrame=function(e){this.isValid&&(null!=(this.sprite.spriteFrame=e)&&e.addRef(),this._loadComplete)&&(this._loadComplete.apply(this._loadCompleteThisObj,this._loadCompleteParam),this._clearLoadParams())},e.clear=function(){var e;this._clearLoadParams(),null!=(e=this.sprite)&&e.spriteFrame&&(this.sprite.spriteFrame.decRef(),this.sprite.spriteFrame.refCount<=0&&this.sprite.spriteFrame.destroy(),this.sprite.spriteFrame=null),this._url=null},e._setLoadParams=function(e,t,n,i,a){this._url=e,this._loadComplete=t,this._loadErrorFun=n,this._loadCompleteThisObj=i,this._loadCompleteParam=a},e._clearLoadParams=function(){this._loadComplete=null,this._loadErrorFun=null,this._loadCompleteThisObj=null,this._loadCompleteParam=null},e._createSpriteFrame=function(e){var t=new c,n=new g;return n.image=e,t.texture=n,t.packable=!1,t},r(n,[{key:"sprite",get:function(){return this._sprite||(this._sprite=this.node.getComponent(u)),this._sprite}},{key:"url",get:function(){return this._url}}]),t=n))||t)||t),s._RF.pop()}}}),System.register("chunks:///_virtual/IsRightMode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./LanguageData.ts"],function(s){var l,u,c,h,d,p,g,f,m,_,v,y;return{setters:[function(e){l=e.applyDecoratedDescriptor,u=e.inheritsLoose,c=e.initializerDefineProperty,h=e.assertThisInitialized},function(e){d=e.cclegacy,p=e._decorator,g=e.Label,f=e.UITransform,m=e.HorizontalTextAlignment,_=e.Component},function(e){v=e.default},function(e){y=e.LanguageData}],execute:function(){d._RF.push({},"f269eZHfLBPrYzVVAlZmIXz","IsRightMode",void 0);var e,a,o,r,t=p.ccclass,n=p.property;function i(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n))||this,c(e,"isRight",a,h(e)),c(e,"isChangeAlign",o,h(e)),e._label=null,e}s("IsRightMode",(t=t("IsRightMode"),e=n({tooltip:"default is right"}),n=n({tooltip:"default is right"}),t((a=l((u(i,r=_),(t=i.prototype).onLoad=function(){this._label=this.node.getComponent(g)},t.start=function(){y.instance.isRTL&&(this.isRight&&(this.node.setScale(-this.node.scale.x,this.node.scale.y),this._label)&&(0===this.node.getComponent(f).anchorX?this.node.getComponent(f).anchorX=1:1===this.node.getComponent(f).anchorX&&(this.node.getComponent(f).anchorX=0)),this._label)&&this.isChangeAlign&&(this._label.horizontalAlign===m.LEFT?this._label.horizontalAlign=m.RIGHT:this._label.horizontalAlign===m.RIGHT&&(this._label.horizontalAlign=m.LEFT)),this._label&&(this._label.string=v.getI18nString(this._label.string))},t=i).prototype,"isRight",[e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=l(t.prototype,"isChangeAlign",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e=t))||e)),d._RF.pop()}}}),System.register("chunks:///_virtual/IsRightWidget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],function(a){var o,r,s,l,u,c;return{setters:[function(e){o=e.inheritsLoose},function(e){r=e.cclegacy,s=e._decorator,l=e.Widget,u=e.Component},function(e){c=e.LanguageData}],execute:function(){r._RF.push({},"440d4v2pTZKRL5JpJd94qDD","IsRightWidget",void 0);var e,t=s.ccclass,n=(s.property,s.requireComponent);function i(){return e.apply(this,arguments)||this}a("IsRightWidget",t("IsRightWidget")(t=n(l)((o(i,e=u),i.prototype.start=function(){var e;c.instance.isRTL&&(e=this.node.getComponent(l))&&(e.isAlignLeft&&!e.isAlignRight?(e.right=e.left,e.isAlignLeft=!1,e.isAlignRight=!0):!e.isAlignLeft&&e.isAlignRight&&(e.left=e.right,e.isAlignLeft=!0,e.isAlignRight=!1))},t=i))||t)||t),r._RF.pop()}}}),System.register("chunks:///_virtual/LanguageData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageType.ts"],function(n){var i,a,o,r;return{setters:[function(e){i=e.createClass},function(e){a=e.cclegacy,o=e.director},function(e){r=e.LanguageType}],execute:function(){function e(){this._language=r.EN,this._ready=!1,this._isRTL=!1,this._rtlLanguages=[r.AR,r.FA,r.UD]}var t;a._RF.push({},"efd0dtQmyhBDJaXB84Mt3wv","LanguageData",void 0),n("LanguageData",((t=e.prototype).init=function(e){this._ready=!0,this._language=e,this._isRTL=-1<this._rtlLanguages.indexOf(e)},t.setLanguageData=function(e,t){e&&t&&(this.windowLanguages[e]=t)},t.translate=function(e){var t;return this._ready&&e&&""!==e?e&&":"===e[e.length-1]?(e=e.substring(0,e.length-1),this.isRTL?" :"+this.translate(e):this.translate(e)+":"):(t=this.windowLanguages[this._language])&&t[e]?this.isRTL?" "+t[e]+" ":t[e]:(t=this.windowLanguages[r.EN])&&t[e]?t[e]:e:e},t.updateSceneRenderers=function(){var e,t=o.getScene();t&&(e=[].concat(t.getComponentsInChildren("LocalizedLabel")).filter(function(e){return e.node.active}),t=[].concat(t.getComponentsInChildren("LocalizedSprite")).filter(function(e){return e.node.active}),e.forEach(function(e){null!=e.updateLabel&&e.updateLabel()}),t.forEach(function(e){null!=e.updateSprite&&e.updateSprite()}))},i(e,[{key:"windowLanguages",get:function(){return window.languages||(window.languages={}),window.languages}},{key:"isRTL",get:function(){return this._isRTL}},{key:"ready",get:function(){return this._ready}},{key:"language",get:function(){return this._language}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e))._instance=void 0,a._RF.pop()}}}),System.register("chunks:///_virtual/LanguageType.ts",["cc"],function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"14cd9EtwaJODaaJQWcB4KVr","LanguageType",void 0),e("LanguageType",{EN:"en",HI:"hi",AR:"ar",MJ:"mj",TR:"tr",ID:"id",VI:"vi",PH:"ph",TH:"th",FA:"fa",AM:"am",RU:"ru",MR:"mr",GJ:"gj",PZ:"pz",TG:"tg",TM:"tm",UD:"ud",KN:"kn",MY:"my"}),t._RF.pop()}}}),System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],function(s){var l,u,c,h,d,p,g,f,m,_;return{setters:[function(e){l=e.applyDecoratedDescriptor,u=e.inheritsLoose,c=e.initializerDefineProperty,h=e.assertThisInitialized,d=e.createClass},function(e){p=e.cclegacy,g=e._decorator,f=e.Label,m=e.Component},function(e){_=e.LanguageData}],execute:function(){p._RF.push({},"f1537KIYOpFT5AJwtafEFMS","LocalizedLabel",void 0);var e,a,o,t=g.ccclass,n=g.property,i=g.executeInEditMode;function r(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=o.call.apply(o,[this].concat(n))||this).label=null,c(e,"key",a,h(e)),e}s("LocalizedLabel",(t=t("LocalizedLabel"),e=n({visible:!1}),n=n({displayName:"Key",visible:!0}),t(t=i((a=l((u(r,o=m),(t=r.prototype).onLoad=function(){this.fetchRender()},t.fetchRender=function(){var e=this.getComponent(f);e&&(this.label=e,this.updateLabel())},t.updateLabel=function(){this.label&&(this.label.string=_.instance.translate(this.key))},d(r,[{key:"_key",get:function(){return this.key},set:function(e){this.key=e,this.updateLabel()}}]),i=r).prototype,"key",[e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l(i.prototype,"_key",[n],Object.getOwnPropertyDescriptor(i.prototype,"_key"),i.prototype),t=i))||t)||t)),p._RF.pop()}}}),System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],function(c){var h,d,p,g,f,m,_,v,y,C;return{setters:[function(e){h=e.applyDecoratedDescriptor,d=e.initializerDefineProperty,p=e.inheritsLoose,g=e.assertThisInitialized},function(e){f=e.cclegacy,m=e._decorator,_=e.SpriteFrame,v=e.Sprite,y=e.Component},function(e){C=e.LanguageData}],execute:function(){f._RF.push({},"8f01arnrQhMFIWqoqoWm3Db","LocalizedSprite",void 0);var e,t,n,a,o,i=m.ccclass,r=m.property,s=m.executeInEditMode,l=(l=i("LocalizedSpriteItem"),n=r({type:_}),l((e=h((l=function(){d(this,"language",e,this),d(this,"spriteFrame",t,this)}).prototype,"language",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),t=h(l.prototype,"spriteFrame",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n=l))||n);function u(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=o.call.apply(o,[this].concat(n))||this).sprite=null,d(e,"spriteList",a,g(e)),e}c("LocalizedSprite",(n=i("LocalizedSprite"),i=r({type:l}),n(n=s((a=h((p(u,o=y),(r=u.prototype).onLoad=function(){this.fetchRender()},r.fetchRender=function(){var e=this.getComponent(v);e&&(this.sprite=e,this.updateSprite())},r.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===C.instance.language){this.sprite.spriteFrame=t.spriteFrame;break}}},l=u).prototype,"spriteList",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),n=l))||n)||n)),f._RF.pop()}}}),System.register("chunks:///_virtual/Logger.ts",["cc","./index.mjs_cjs=&original=.cjs","./Utils.ts","./GlobalContext.ts","./TimeUtil.ts","./index.cjs"],function(n){var i,a,o,s,l,u;return{setters:[function(e){i=e.cclegacy,a=e.sys},null,function(e){o=e.default},function(e){s=e.globalContext},function(e){l=e.TimeUtil},function(e){u=e.default}],execute:function(){n("LogType",void 0),i._RF.push({},"d04acsoy8JIQpCzBmrEqlTQ","Logger",void 0),(e=r=r||n("LogType",{}))[e.DEBUG=0]="DEBUG",e[e.LOG=1]="LOG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",window.h5Console=function(){};var r,e=n("Logger",(t.setTag=function(e){this._tag=e},t.init=function(){this.initCatchError(),this.webglErrorListener()},t.startTimer=function(e){this.timers.set(e,window.performance.now())},t.endTimer=function(e){var t=this.timers.get(e);t&&(t=window.performance.now()-t,this.log("[TIMER] "+e+": "+t.toFixed(2)+"ms"),this.timers.delete(e))},t.webglErrorListener=function(){document.getElementById("GameCanvas").addEventListener("webglcontextlost",function(e){t.error("webglcontextlost",e),setTimeout(function(){window.location.reload()},1e3),null!=e&&e.preventDefault()},!1)},t.resetLogLevel=function(e){(this._levelType=e)>r.WARN?(console.log=function(){},console.info=function(){},console.warn=function(){}):e===r.WARN&&(console.log=function(){},console.info=function(){})},t.initCatchError=function(){window.onerror=function(){for(var t="",e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(function(e){t+=e}),console.error("window.onerror:",t)}},t.reportError=function(e){-1<this._cacheLog.indexOf(e)||20<this._cacheLog.length||(this._cacheLog.push(e),0<this._reportTimeOutIndex)||Date.now()-this._sendTime<1e3||this.sendError()},t.sendError=function(){var e,t=this._cacheLog.shift();t?(this._sendTime=Date.now(),u.ReportEvent(s.reportEventKey+"-error",{duration:l.getDuration(),webview:null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent,gameId:s.gameId,roomId:s.roomId,game_main_ver:window.Version,os_name:a.os,os_version:a.osVersion,startTimes:s.startTimes,errorMsg:t},{focus:!1},0,!1),this._reportTimeOutIndex=setTimeout(this.sendError.bind(this),1e3)):this.clearReportTimeOut()},t.clearReportTimeOut=function(){this._reportTimeOutIndex&&(clearTimeout(this._reportTimeOutIndex),this._reportTimeOutIndex=0)},t.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,[r.DEBUG].concat(t))},t.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,[r.LOG].concat(t))},t.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,[r.WARN].concat(t))},t.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,[r.ERROR].concat(t))},t._log=function(e){var t;if(!(this._levelType>e)){for(var n=this._tag,i=arguments.length,a=new Array(1<i?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];switch(e){case r.DEBUG:case r.LOG:(t=console).log.apply(t,[n].concat(a));break;case r.INFO:(t=console).info.apply(t,[n].concat(a));break;case r.WARN:(t=console).warn.apply(t,[n].concat(a));break;case r.ERROR:(t=console).error.apply(t,[n].concat(a))}}},t.logToNative=function(e){if(o.isNative()&&!(this._levelType>e))for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];"object"==typeof n&&JSON.stringify(n)}},t));function t(){}e._tag="[h5-game]",e._cacheLog=new Array,e._reportTimeOutIndex=0,e._sendTime=0,e._levelType=r.DEBUG,e.timers=new Map,i._RF.pop()}}}),System.register("chunks:///_virtual/main",["./AudioPayerH5.ts","./CachePool.ts","./CommonInterface.ts","./EventType.ts","./GameUIConfig2.ts","./GlobalContext.ts","./Logger.ts","./BottomAreaView.ts","./FrameLoad.ts","./GameBackground.ts","./ImageAdapter.ts","./IsRightMode.ts","./IsRightWidget.ts","./RunningDataCollector.ts","./SpineAnimationAdapter.ts","./SpriteAdapter.ts","./StartView.ts","./UIView.ts","./LanguageData.ts","./LanguageType.ts","./LocalizedLabel.ts","./LocalizedSprite.ts","./EventManager.ts","./RTMManager.ts","./UIManager.ts","./WindowFunctionManager.ts","./WebSocketBase.ts","./TimeUtil.ts","./UrlDataUtil.ts","./Utils.ts","./GameGlobal.ts","./GameUIConfig.ts","./Main.ts","./globle.mjs_cjs=&original=.js"],function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}),System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.cjs","./index.js","./EventType.ts","./GameUIConfig2.ts","./GlobalContext.ts","./Logger.ts","./RunningDataCollector.ts","./LanguageType.ts","./EventManager.ts","./UIManager.ts","./UrlDataUtil.ts","./GameGlobal.ts","./RTMManager.ts","./GameUIConfig.ts","./LanguageData.ts","./index.cjs"],function(n){var i,o,r,s,l,u,c,h,d,p,g,f,m,_,v,y,C,b,I,w,S,T,M,k,R,L,E,A;return{setters:[function(e){i=e.inheritsLoose,o=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,u=e.macro,c=e.dynamicAtlasManager,h=e.game,d=e.Label,p=e.sys,g=e.Component},null,function(e){f=e.GetUserInfo,m=e.getAppRequestHost},function(e){_=e.EventType},function(e){v=e.UILayerType},function(e){y=e.globalContext},function(e){C=e.Logger,b=e.LogType},function(e){I=e.RunningDataCollector},function(e){w=e.LanguageType},function(e){S=e.EventMgr},function(e){T=e.uiManager},function(e){M=e.default},function(e){k=e.gameGlobal},function(e){R=e.rtmManager},function(e){L=e.GameUIID},function(e){E=e.LanguageData},function(e){A=e.default}],execute:function(){s._RF.push({},"99bc5FSiP5PB55kosgl3Mmo","Main",void 0);var a,e=l.ccclass;function t(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))||this)._verInfoLabel=null,e._gameState=-1,e._sendInitTime=void 0,e._initTimeoutIndex=0,e._isFirstInit=!0,e._isInitRTM=!1,e}l.property,u.CLEANUP_IMAGE_CACHE=!1,c.enabled=!1,n("default",e((i(t,a=g),(e=t.prototype).onLoad=function(){C.log("main_onLoad",Math.floor(window.performance.now()),window.Env,window.Branch,window.Version),u.ENABLE_MULTI_TOUCH=!1,h.frameRate=60;var e=!0,e=("prod"===window.Env&&(e=!0),A.initEnv(e),C.init(),this._verInfoLabel=this.node.getChildByName("verInfoLabel").getComponent(d),y.isCloseGame=!1,y.reportEventKey="fe-game-crazy-fruit",y.StageWidth=screen.width,y.StageHeight=screen.height,y.GameRemoteHost="https://"+window.location.host+"/game","dev"===window.Env&&(y.GameRemoteHost="https://fe-1.test.funnymamu.com/game"),T.backgroundLayer=this.node.getChildByName("backgroundLayer"),T.mainUILayer=this.node.getChildByName("mainUILayer"),T.tipLayer=this.node.getChildByName("tipLayer"),T.topLayer=this.node.getChildByName("topLayer"),y.userInfo=f(),y.userInfo||(y.userInfo={funId:"",userId:M.getQueryValue("uid"),userName:"",token:M.getQueryValue("token"),uiLang:w.UD,appVersion:"",packageName:""}),M.getQueryValue("roomId")),e=(y.roomId=e||y.userInfo.roomId+"",y.gameId=29,this.getStartTimes(),this._gameState=0,T.GameConf={bundleName:"gameBundle",preLoadPrefabs:[L.gameMain]},M.getQueryValue("uiLang")),t=(e&&y.userInfo&&(y.userInfo.uiLang=e),null!=y&&null!=(e=y.userInfo)&&e.uiLang&&(y.userInfo.uiLang=y.userInfo.uiLang.toLowerCase()),E.instance.init(y.userInfo.uiLang),null==(e=T.GameConf)?void 0:e.preLoadPrefabs[this._gameState]);T.openBundleUI(T.GameConf.bundleName,t,null,v.MAIN_LAYER,function(){var e=Math.floor(window.performance.now());A.ReportEvent("fe-game-crazy-fruit-openBundleUI",{duration:e,roomId:y.roomId,gameStartPage:t,os_name:p.os,os_version:p.osVersion},{focus:!1},1e3)},T.GameConf.md5?{version:T.GameConf.md5}:null),this.scheduleOnce(function(){y.appRequestHost=m(),null!=(e=y.appRequestHost)&&e.report&&A.setApiHostUrl(null==(e=y.appRequestHost)?void 0:e.report);var e=M.getQueryValue("host");y.HostAddress=e?atob(e):null==(e=y.appRequestHost)?void 0:e.live,A.ReportEvent("fe-game-crazy-fruit-init",{game_version:window.Version,cocos_version:window.cocos_version,webview:null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent,startTimes:y.startTimes,roomId:y.roomId,userId:y.userInfo.funId,os_name:p.os,os_version:p.osVersion,duration:Math.floor(window.performance.now())},{focus:!0},1e3)})},e.start=function(){var t=this;this.scheduleOnce(o(r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:A.createTrackEvent("fe-game-"+k.gameName,{isGame:!0,isPerformance:!0,isSlowReport:!0,isPath:!0}),t.node.addComponent(I);case 2:case"end":return e.stop()}},e)})),6),A.eventManager.addEventListener("clientEvent",this.clientEvent,this),A.eventManager.addEventListener("FunAsyncJSBridgeCallback",this.funAsyncJSBridgeCallback,this)},e.onEnable=function(){var e;"prod"===window.Env||"preview"===window.Env?(this._verInfoLabel.node.active=!1,C.resetLogLevel(b.ERROR)):(e="evn:"+window.Env+"_ver:"+window.Version+" _b:"+window.Branch,this._verInfoLabel.string=e,this._verInfoLabel.node.active=!0),this.initListener()},e.onDisable=function(){this.removeListener()},e.initListener=function(){S.addEventListener("sendGameInitReq",this.sendGameInitReq,this),S.addEventListener("initRTMResponseMsg",this.initRTMResponseMsg,this),S.addEventListener("RTMResponseMsg",this.RTMResponseMsg,this)},e.removeListener=function(){S.removeEventListener("sendGameInitReq",this.sendGameInitReq,this),S.removeEventListener("initRTMResponseMsg",this.initRTMResponseMsg,this),S.removeEventListener("RTMResponseMsg",this.RTMResponseMsg,this)},e.onDestroy=function(){this.cleanInitTimeout(),S.destroy()},e.getStartTimes=function(){var e=y.gameId+"_start_times";y.startTimes=1;try{var t,n=p.localStorage.getItem(e);n&&(t=JSON.parse(n))&&t.h5Version===window.Version?(t.times+=1,y.startTimes=t.times,p.localStorage.setItem(e,JSON.stringify(t))):p.localStorage.setItem(e,JSON.stringify({h5Version:window.Version,times:1}))}catch(n){C.error(e,n)}},e.initRTMResponseMsg=function(){this._isInitRTM=!0,this.sendGameInitReq()},e.RTMResponseMsg=function(e){if(this._isInitRTM&&e)switch(e.event){case"crazy_fruit_init":this.cleanInitTimeout(),this.gameInitDataRsp(e.params);break;case"crazy_fruit_state":S.dispatchEvent("updateGameState",e.params);break;case"crazy_fruit_bet":S.dispatchEvent("updateSpinData",e.params);break;case"crazy_fruit_diamond_sync":S.dispatchEvent("updateDiamondData",e.params);break;case"crazy_fruit_sync_area_state":S.dispatchEvent("updateBetAreaState",e.params);break;case"crazy_fruit_rank":S.dispatchEvent("updateRank",e.params)}},e.sendGameInitReq=function(){var e,t=this;this._sendInitTime=Math.floor(window.performance.now()),y.isRTM?(C.log("sendGameInitReq",this._sendInitTime),R.sendRTM({action:"CrazyFruit:init",params:{betVersion:k.betVersion}}),this.cleanInitTimeout(),this._initTimeoutIndex=window.setTimeout(function(){t.sendGameInitReq()},2e3)):(e=y.HostAddress+"/game/crazy-fruit/init?uid="+y.userInfo.userId,A.networkHelper.sendHttpData(e,null,null,this.gameInitDataRsp.bind(this),this.gameInitError.bind(this),"GET",5e3))},e.gameInitDataRsp=function(e){var t;e&&(y.isRTM?k.gameInitData=e:k.gameInitData=e.data,S.dispatchEvent("gameInitDataRsp"),t=Math.floor(window.performance.now()),C.log("gameInitDataRsp",e),this._isFirstInit)&&(this._isFirstInit=!1,A.ReportEvent("fe-game-crazy-fruit-gameInitData",{roomId:y.roomId,os_name:p.os,os_version:p.osVersion,isSucceed:!0,startTime:this._sendInitTime,usedTime:t-this._sendInitTime,duration:t},{focus:!0},3e3))},e.gameInitError=function(e){var t=this;window.setTimeout(function(){t.sendGameInitReq()},1e3),A.ReportEvent("fe-game-crazy-fruit-gameInitData",{roomId:y.roomId,os_name:p.os,os_version:p.osVersion,isSucceed:!1,startTime:this._sendInitTime,duration:Math.floor(window.performance.now())},{focus:!0},3e3),S.dispatchEvent("updateSpinStatus",-1)},e.clientEvent=function(e,t){switch(e){case"minimized_room_in_game":S.dispatchEvent(_.NATIVE_VIEW_MINI_STATUS,t);break;case"activity_status_change":S.dispatchEvent(_.NATIVE_ACTIVITY_STATUS_CHANGE,t);break;case"game_music_status_change":case"game_sound_status_change":case"leave_room":case"join_game_channel":break;case"mic_sound_update":S.dispatchEvent(_.NATIVE_MIC_SOUND_UPDATE,t);break;case"mic_status":S.dispatchEvent(_.NATIVE_MIC_VOLUME_CHANGE,t)}},e.showCloseGameView=function(){T.closeAllExcept(),y.isCloseGame=!0,A.ReportEvent("fe-game-crazy-fruit-closeView",{duration:Math.floor(window.performance.now()),roomId:y.roomId,os_name:p.os,os_version:p.osVersion},null,0),A.CloseCurWebView()},e.funAsyncJSBridgeCallback=function(e){C.log("funAsyncJSBridgeCallback",e)},e.cleanInitTimeout=function(){0<this._initTimeoutIndex&&(window.clearTimeout(this._initTimeoutIndex),this._initTimeoutIndex=0)},e=t))||e),s._RF.pop()}}}),System.register("chunks:///_virtual/RTMManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.cjs","./GlobalContext.ts","./EventManager.ts","./Logger.ts","./UIManager.ts","./GameUIConfig2.ts","./Utils.ts","./index.cjs"],function(n){var i,a,o,r,s,l,u,c,h;return{setters:[function(e){i=e.extends},function(e){a=e.cclegacy},null,function(e){o=e.globalContext},function(e){r=e.EventMgr},function(e){s=e.Logger},function(e){l=e.uiManager},function(e){u=e.UILayerType},function(e){c=e.default},function(e){h=e.default}],execute:function(){a._RF.push({},"de47auwjD9CI5a1wZGZz4jv","RTMManager",void 0);var e=n("RTMManager",((e=t.prototype).initRTM=function(){window.RTMResponseMsg=this.RTMResponseMsg.bind(this)},e.sendRTM=function(e){o.systemError||(this.reqCount++,h.RTMRequestMsg(e))},e.RTMResponseMsg=function(e){if(!o.systemError)try{var t,n;e&&((i=(t=JSON.parse(e)).events)&&0<i.length&&(n=i[0])&&t.gameId===o.gameId&&(this.respCount++,this.eventHandlers[n.event]?this.eventHandlers[n.event](n.params):r.dispatchEvent("RTMResponseMsg",n)),this._errorTimes=0)}catch(t){var i;0===this._errorTimes&&e?(this._errorTimes++,i=(i=e.replace(/\\/g,"")).replace(/[\u0000-\u001F\u007F-\u009F]/g," "),this.RTMResponseMsg(i)):(this._errorTimes=0,s.error("RTMResponseMsg_error",typeof e,e,t))}},t));function t(){this.reqCount=0,this.respCount=0,this._errorTimes=0,this.eventHandlers={game_system_error:function(e){o.systemError=!0,l.openBundleUI("gameBundle","component-libs/gameError/prefab/gameError",null,u.TOP_LAYER)},game_push_notice:function(e){null!=e&&e.msg&&l.openBundleUI("gameBundle","component-libs/ConfirmDialog/prefab/ConfirmDialog",{showString:c.b64_to_utf8(e.msg),sureBtnSting:"OK",sureCallBack:function(){}},u.TOP_LAYER)},game_daily_back_info:function(e){o.treasureBoxData=e,r.dispatchEvent("update_treasure_box_data",e)},game_daily_back_reward:function(e){var t;0<(null==e||null==(t=e.gameRewardInfos)?void 0:t.length)&&r.dispatchEvent("game_daily_back_reward",null==e?void 0:e.gameRewardInfos[0])},game_support_h5_sync:function(e){var t;o.gameSupportData=i({},o.gameSupportData,e||{},{action:null!=(t=null==e?void 0:e.action)?t:null==(t=o.gameSupportData)?void 0:t.action}),r.dispatchEvent("game_support_h5_sync",e)}}}n("rtmManager",new e).initRTM(),a._RF.pop()}}}),System.register("chunks:///_virtual/RunningDataCollector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.cjs","./index.js","./GlobalContext.ts","./UIManager.ts","./Logger.ts","./RTMManager.ts","./Utils.ts","./index.cjs"],function(t){var n,i,o,r,l,u,c,h,d,p,g,f,m;return{setters:[function(e){n=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator,r=e.sys,l=e.director,u=e.Component},null,function(e){c=e.SwitchDevice},function(e){h=e.globalContext},function(e){d=e.uiManager},function(e){p=e.Logger},function(e){g=e.rtmManager},function(e){f=e.default},function(e){m=e.default}],execute:function(){i._RF.push({},"a876ad1O55If5HGXFc1gXLK","RunningDataCollector",void 0);var a,e=o.ccclass;function s(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))||this).curFrame=0,e.curSaveData=void 0,e._sendTime=0,e}o.property,t("RunningDataCollector",e("RunningDataCollector")((n(s,a=u),(e=s.prototype).start=function(){this._sendTime=Date.now(),this.schedule(this.afterDraw,1)},e.onDestroy=function(){this.unscheduleAllCallbacks()},e.sendRuningData=function(e){var t=(Date.now()-this._sendTime)/s.sendHZ,n=Math.round((g.respCount-g.reqCount)/t),t=Math.round(s.rtmError/t),n=(this._sendTime=Date.now(),{h5Version:window.Version,gameId:h.gameId,userId:h.userInfo.funId,os_name:r.os,os_version:r.osVersion,startTimes:h.startTimes,duration:Math.floor(performance.now()),rtmCount:n,rtmError:t});Object.assign(n,e),g.respCount=0,g.reqCount=0,s.rtmError=0,m.ReportEvent(h.reportEventKey+"-runningData",n,{focus:!0})},e.afterDraw=function(e){if(h.isMiniView)this._sendTime=Date.now()+2e3,this.curSaveData=null;else if(!(Date.now()-this._sendTime<1e3)){var t=l.root.device;this.curFrame=l.root.fps;var n=(n=this.curSaveData)||{},i=Math.floor(t.memoryStatus.bufferSize/1048576*100)/100,a=Math.floor(t.memoryStatus.textureSize/1048576*100)/100;if((!n.bufferMemory||n.bufferMemory<i)&&(n.bufferMemory=i),(!n.textureMemory||n.textureMemory<a)&&(n.textureMemory=a),(!n.drawCall||n.drawCall<t.numDrawCalls)&&(n.drawCall=t.numDrawCalls),(!n.fps||n.fps>this.curFrame)&&(n.fps=this.curFrame,n.pageName=d.getIsOpenUIName(),n.fpsSaveTime=Math.floor(performance.now())),(!n.numTris||n.numTris<t.numTris)&&(n.numTris=t.numTris),this.curSaveData=n,Date.now()-this._sendTime>=s.sendHZ){try{var o=this.getAppPerformance(),r=(o&&(this.curSaveData.thermalState=o.thermalState,this.curSaveData.temperature=o.temperature),this.getDeviceMemory());r&&(this.curSaveData.memoryMax=r.max,this.curSaveData.memoryAvailable=r.available)}catch(e){p.warn("getAppPerformance",e)}this.sendRuningData(this.curSaveData),this.curSaveData=null}}},e.getAppPerformance=function(){if(f.isIos())return null;try{return c({method:"getAppPerformance"},!0,!1)}catch(e){return null}},e.getDeviceMemory=function(){if(f.isIos())return null;try{return c({method:"getDeviceMemory"},!0,!1)}catch(e){return null}},(e=s).sendHZ=15e3,e.rtmError=0,e=e))||e),i._RF.pop()}}}),System.register("chunks:///_virtual/SpineAnimationAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./CachePool.ts"],function(i){var r,s,l,u,h,d,p,g,f,m,_,v,y;return{setters:[function(e){r=e.inheritsLoose,s=e.createClass},function(e){l=e.cclegacy,u=e._decorator,h=e.sp,d=e.path,p=e.assetManager,g=e.Texture2D,f=e.ImageAsset,m=e.resources,_=e.Component},function(e){v=e.Logger},function(e){y=e.CachePool}],execute:function(){l._RF.push({},"cf59aNjcMdHkJfLWrW/3Rpv","SpineAnimationAdapter",void 0);var a,e,t=u.ccclass,o=((e=n.prototype).isOnce=function(){return this.once},e.dispose=function(){this.callback=null},n);function n(e,t){this.callback=void 0,this.once=void 0,this.callback=e,this.once=t}function c(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))||this).url=null,e.skinName=void 0,e.animationKey="",e.loop=!1,e.DefaultTrack=0,e.completeCallbackMap=new Map,e.startCallbackMap=new Map,e.eventCallbackMap=new Map,e.premultipliedAlpha=!1,e._sp=void 0,e}i("SpineAnimationAdapter",t((r(c,a=_),c.get=function(e){return e.getComponent(c)||e.addComponent(c)},(e=c.prototype).onLoad=function(){this.addListeners()},e.getSpine=function(){return this._skeleton},e.setSkeletonData=function(e){this._skeleton&&e&&(e.addRef(),this._skeleton.skeletonData=e)},e.getUrl=function(){return this.url},e.clearSkeletonData=function(){this.url=null,this._skeleton&&this._skeleton.skeletonData&&(this._skeleton.skeletonData.decRef(),this._skeleton.skeletonData=null)},e.addListeners=function(){this._skeleton&&(this._skeleton.setCompleteListener(this.onAnimationComplete.bind(this)),this._skeleton.setStartListener(this.onAnimationStart.bind(this)),this._skeleton.setEventListener(this.onAnimationEvent.bind(this)))},e.removeListeners=function(){this._skeleton&&(this._skeleton.clearTrack(this.DefaultTrack),this._skeleton.setCompleteListener(null),this._skeleton.setStartListener(null),this._skeleton.setEventListener(null))},e.onAnimationEvent=function(e,t){var n,t=t.data.name;this.eventCallbackMap.has(t)&&((n=this.eventCallbackMap.get(t)).callback(t),n.isOnce())&&this.deleteEventCallback(t)},e.addEventCallback=function(e,t,n){void 0===n&&(n=!0),t&&(t=new o(t,n),this.eventCallbackMap.set(e,t))},e.clearEventCallback=function(){this._clearCallbackMap(this.eventCallbackMap)},e.deleteEventCallback=function(e){var t=this.eventCallbackMap.get(e);t&&(t.dispose(),this.eventCallbackMap.delete(e))},e.onAnimationStart=function(e){var t,e=null==e||null==(e=e.animation)?void 0:e.name;e&&this.startCallbackMap.has(e)&&((t=this.startCallbackMap.get(e)).callback(e),t.isOnce())&&this.deleteStartCallback(e)},e.addStartCallback=function(e,t,n){t&&(t=new o(t,n),this.startCallbackMap.set(e,t))},e.deleteStartCallback=function(e){var t=this.startCallbackMap.get(e);t&&(t.dispose(),this.startCallbackMap.delete(e))},e.clearStartCallback=function(){this._clearCallbackMap(this.startCallbackMap)},e.onAnimationComplete=function(e){var t,e=e.animation.name;this.completeCallbackMap.has(e)&&((t=this.completeCallbackMap.get(e)).callback(e),t.isOnce())&&this.deleteCompleteCallback(e)},e.setAnimation=function(e,t,n,i){if(void 0===t&&(t=!1),void 0===n&&(n=null),void 0===i&&(i=!0),this.node.active&&this._skeleton)try{this._skeleton.loop=t,this._skeleton.animation=e,this.addCompleteCallback(e,n,i)}catch(t){v.error("setAnimation_error",this.url,e,t)}},e.setAnimationAndSkin=function(e,t,n,i,a){if(void 0===n&&(n=!1),void 0===i&&(i=null),void 0===a&&(a=!0),this.node.active&&this._skeleton)try{this._skeleton.setSkin(t),this._skeleton.setAnimation(this.DefaultTrack,e,n),this.addCompleteCallback(e,i,a)}catch(n){v.error("setAnimation_error",this.url,e,t,n)}},e.addAnimation=function(e,t,n,i,a){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===i&&(i=null),void 0===a&&(a=!0),this._skeleton&&(this._skeleton.addAnimation(this.DefaultTrack,e,n,t),this.addCompleteCallback(e,i,a))},e._manageCallback=function(e,t,n,i){n&&"function"==typeof n&&e.set(t,new o(n,i))},e.addCompleteCallback=function(e,t,n){this._manageCallback(this.completeCallbackMap,e,t=void 0===t?null:t,n=void 0===n?!0:n)},e.deleteCompleteCallback=function(e){var t=this.completeCallbackMap.get(e);t&&(t.dispose(),this.completeCallbackMap.delete(e))},e.clearCompleteCallback=function(){this._clearCallbackMap(this.completeCallbackMap)},e._clearCallbackMap=function(e){e.forEach(function(e,t){e.dispose()}),e.clear()},e.setMix=function(e,t,n){this._skeleton&&0<n?this._skeleton.setMix(e,t,n):v.warn("Invalid mix duration:",n)},e.getCurAnimationName=function(e){if(void 0===e&&(e=0),this._skeleton){e=this._skeleton.getCurrent(e);if(e&&e.animation)return e.animation.name}return null},e.show=function(){this.node.active=!0},e.hide=function(){this.node.active=!1},e.onDestroy=function(){this.removeListeners(),this.clearStartCallback(),this.clearCompleteCallback(),this.clearEventCallback(),this.clearSkeletonData(),this.completeCallbackMap=null,this.startCallbackMap=null,this.eventCallbackMap=null},c.preloadSpineDataRemote=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),y.hasObj(e)?v.log("hasOldSpineData",e):this.loadSpineData(e,n).then(function(e){t&&t()})},c.saveSpineData=function(e,t){y.hasObj(e)||(t.addRef(),y.addObj(e,t))},c.clearSpineCache=function(e){y.hasObj(e)&&(e=y.delObj(e))&&(e.decRef(),e.refCount<=0)&&e.destroy()},e.initSpineData=function(n,e,t,i,a,o,r){var s=this;void 0===e&&(e="default"),void 0===t&&(t="animation"),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===o&&(o=!0),void 0===r&&(r=null),this.url=n,this.skinName=e||"default",this.animationKey=t||"animation",this.loop=i||!1,this.addCompleteCallback(t,a,o),y.hasObj(n)?this.loadComplete(n,null,y.getObj(n)):(r?r:m).load(n,h.SkeletonData,function(e,t){null==e&&t?(c.saveSpineData(n,t),s.loadComplete(n,e,t)):v.error("initSpineData_loadError",e)})},e.initSpineDataRemote=function(t,e,n,i,a,o,r){var s=this;void 0===e&&(e="default"),void 0===n&&(n="animation"),void 0===i&&(i=!1),void 0===a&&(a=!0),void 0===o&&(o=null),void 0===r&&(r=null),v.log("initSpineDataRemote",t),this.url=t,this.skinName=e||"default",this.animationKey=n||"animation",this.loop=i||!1,this.addCompleteCallback(n,o,a),y.hasObj(t)?this.loadComplete(t,null,y.getObj(t)):c.loadSpineData(t,r).then(function(e){s.loadComplete(t,null,e)})},c.loadSpineData=function(r,s){var l=r+".png",e=r+".atlas",t=r+".json",u=d.basename(l);return new Promise(function(a,o){p.loadAny([{url:e,ext:".atlas"},{url:t,ext:".txt"},{url:l,ext:".png"}],function(e,t){var n,i;(null!=e?(s&&s(),v.error("initSpineDataRemote_e1:",e),o):((e=new h.SkeletonData).skeletonJson=t[1],e.atlasText=t[0],n=new g,(i=new f)._nativeUrl=l,i._nativeAsset=t[2],n.image=i,e.textures=[n],e.textureNames=[u],c.saveSpineData(r,e),a))(e)})})},e.loadComplete=function(e,t,n){if(this.isValid&&null==t&&n&&this.url===e)try{this._skeleton&&(this.setSkeletonData(n),this._skeleton.setAnimationCacheMode(h.AnimationCacheMode.REALTIME),this._skeleton.premultipliedAlpha=this.premultipliedAlpha,this._skeleton.setSkin(this.skinName),this._skeleton.invalidAnimationCache(),this.setAnimation(this.animationKey,this.loop),v.log("spine_loadComplete",e))}catch(t){v.error("spine_play_error",e,t)}},e.changeSlot=function(o,r){var s=this;return new Promise(function(e){var t,n,i,a=null==(a=s._skeleton)?void 0:a.findSlot(o);a?(a=a.getSkeleton().getAttachmentByName(o,o))?((t=a.region)||(v.warn("region is empty:",o),t=new h.spine.TextureAtlasRegion),n=r.image.data,(n=new h.SkeletonTexture(n)).setRealTexture(r),(i=new h.spine.TextureAtlasPage).name=r.name,i.uWrap=h.spine.TextureWrap.ClampToEdge,i.vWrap=h.spine.TextureWrap.ClampToEdge,i.texture=n,i.texture.setWraps(i.uWrap,i.vWrap),i.width=r.width,i.height=r.height,t.page=i,t.width=r.width,t.height=r.height,t.originalWidth=r.width,t.originalHeight=r.height,t.rotate=!1,t.u=0,t.v=0,t.u2=1,t.v2=1,t.texture=n,a.setRegion(t),a.updateOffset(),null!=(i=s._skeleton)&&i.invalidAnimationCache()):v.error("Attachment is empty:",o):v.error("slot is empty:",o),e()})},s(c,[{key:"_skeleton",get:function(){return!this._sp&&this.node&&this.isValid&&(this._sp=this.node.getComponent(h.Skeleton)),this._sp}},{key:"paused",get:function(){return!!this._skeleton&&this._skeleton.paused},set:function(e){this._skeleton&&(this._skeleton.paused=e)}}]),t=c))||t),l._RF.pop()}}}),System.register("chunks:///_virtual/SpriteAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts","./Utils.ts"],function(t){var n,i,r,s,l,u,c,h,d,p,g,f;return{setters:[function(e){n=e.inheritsLoose,i=e.createClass},function(e){r=e.cclegacy,s=e._decorator,l=e.SpriteFrame,u=e.resources,c=e.SpriteAtlas,h=e.assetManager,d=e.Texture2D,p=e.Sprite},function(e){g=e.Logger},function(e){f=e.default}],execute:function(){r._RF.push({},"8c704gHlz9AvYK7nzqjUL1Q","SpriteAdapter",void 0);var a,e=s.ccclass;function o(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))||this)._url=null,e._resName=null,e._loadComplete=null,e._loadCompleteThisObj=null,e._loadCompleteParam=null,e}s.property,s.requireComponent,t("SpriteAdapter",e((n(o,a=p),(e=o.prototype).onDestroy=function(){this.clear()},e.loadSpriteFrame=function(e,t,n,i,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null);var o=null,o=(a=void 0===a?null:a)||u;this._url=e+"/spriteFrame",this._loadComplete=t,this._loadCompleteThisObj=n,this._loadCompleteParam=i,o.load(this._url,l,this.loadSpriteFrameComplete.bind(this,this._url))},e.loadSpriteAtlas=function(e,t,n,i,a){void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=null),this._url=e,this._resName=t,this._loadComplete=n,this._loadCompleteThisObj=i,this._loadCompleteParam=a,u.load(e,c,this.loadSpriteAtlasComplete.bind(this,e,t))},e.loadImageByHttps=function(n,e,i,t,a){var o=this;void 0===e&&(e=null),void 0===i&&(i=null),void 0===t&&(t=null),void 0===a&&(a=null),f.isEmpty(n)||this._url!==n&&(this._url=n,this._loadComplete=e,this._loadCompleteThisObj=i,this._loadCompleteParam=t,h.loadRemote(n,{ext:".png"},function(e,t){a&&e?a.call(i):o.loadImageByHttpsComplete(n,e,t)}))},e.loadSpriteFrameComplete=function(e,t,n){var i;null!=t?(this.clear(),g.error(null==(i=this.node)?void 0:i.name,"loadImageByLocation_error",e,t)):this.setSpiteFrame(n)},e.loadSpriteAtlasComplete=function(e,t,n,i){null==n?this.setSpiteFrame(i.getSpriteFrame(this._resName)):g.log(n,e)},e.setSpiteFrame=function(e){this.isValid&&(this.spriteFrame=e,this.spriteFrame.addRef(),this._loadComplete)&&(this._loadComplete.apply(this._loadCompleteThisObj,this._loadCompleteParam),this._loadComplete=null,this._loadCompleteThisObj=null,this._loadCompleteParam=null)},e.loadImageByHttpsComplete=function(e,t,n){var i,a;null==t&&n?((i=o._cacheMap[n.nativeUrl])||((a=new d).image=n,(i=new l).packable=!1,i.texture=a,n.addRef(),o._cacheMap[n.nativeUrl]=i),this.setSpiteFrame(i)):g.error(null==(a=this.node)?void 0:a.name,"loadImageByHttp_error",e,t)},e.clear=function(){var e,t,n;this._loadComplete=null,this._loadCompleteThisObj=null,this._loadCompleteParam=null,this.spriteFrame&&this._url&&(this.spriteFrame.decRef(),e=this.spriteFrame,this.spriteFrame=null,e.refCount<=0)&&(t=e.texture,o._cacheMap[null==(n=t.image)?void 0:n.nativeUrl])&&(t&&!e.packable&&(delete o._cacheMap[null==(n=t.image)?void 0:n.nativeUrl],null!=(n=t.image)&&n.decRef(),t.isValid)&&t.destroy(),e.isValid)&&e.destroy(),this._url=null},i(o,[{key:"url",get:function(){return this._url}}]),o._cacheMap={},e=o))||e),r._RF.pop()}}}),System.register("chunks:///_virtual/StartView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalContext.ts","./UIManager.ts","./GameUIConfig2.ts"],function(i){var a,o,r,s,l,u,c;return{setters:[function(e){a=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,s=e.Component},function(e){l=e.globalContext},function(e){u=e.uiManager},function(e){c=e.UILayerType}],execute:function(){o._RF.push({},"be17c3kaV1NMayQVbkfYRXI","StartView",void 0);var e,t=r.ccclass;function n(){return e.apply(this,arguments)||this}r.property,i("StartView",t("StartView")((a(n,e=s),n.prototype.start=function(){this.scheduleOnce(function(){var e;null!=(e=l.userInfo)&&e.token||u.openBundleUI("gameBundle","component-libs/gameError/prefab/gameError",{title:"tips_app_too_old_title",content:"tips_app_too_old_content"},c.TOP_LAYER)})},t=n))||t),o._RF.pop()}}}),System.register("chunks:///_virtual/TimeUtil.ts",["cc"],function(t){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){function e(){}n._RF.push({},"00992vVIpxJB5vWm4bZjm6N","TimeUtil",void 0),t("TimeUtil",(e.addZero=function(e){return 10<=e?e+"":"0"+e},e.secondsToChinese=function(e){var t,n;return 3600<e?(t=e%60,n=parseInt(e/60+"",10)%60,parseInt(e/3600+"",10)+""+(0<n?n+"":"")+(0<t?t+"":"")):60<e?(n=e%60,parseInt(e/60+"",10)%60+""+(0<n?n+"":"")):e+""},e.secondsToHHMMSS=function(e){var t,n,i;return 3600<=e?(t=e%60,i=parseInt(e/60+"",10)%60,n=parseInt(e/3600+"",10),this.addZero(n)+":"+this.addZero(i)+":"+this.addZero(t)):60<=e?(n=e%60,i=parseInt(e/60+"",10)%60,this.addZero(i)+":"+this.addZero(n)):"00:"+this.addZero(e)},e.secondsToTT_TT=function(e){var t,n;return 3600<e?(n=Math.floor(e/60)%60,t=Math.floor(e/3600),this.addZero(t)+":"+this.addZero(n)):60<=e?(t=e%60,n=Math.floor(e/60)%60,this.addZero(n)+":"+this.addZero(t)):"00:"+this.addZero(e)},e.secondsToChineseDate=function(e){var t,n;return 3600<e?(t=e%60,n=parseInt(e/60+"",10)%60,parseInt(e/3600+"",10)+":"+(n<10?"0"+n:n)+":"+(t<10?"0"+t:t)):60<e?(n=e%60,parseInt(e/60+"",10)%60+":"+(n<10?"0"+n:n)):e+""},e.getDateTimeStr=function(){return this.timeSecondsToDate((new Date).getTime())},e.timeSecondsToDate=function(e){e=new Date(e);return this.addZero(e.getDate())+"/"+this.addZero(e.getMonth()+1)+"/"+e.getFullYear()+" "+this.addZero(e.getHours())+":"+this.addZero(e.getMinutes())+":"+this.addZero(e.getSeconds())},e.timeSecondsToChineseDate2=function(e){e=new Date(e);return e.getFullYear()+"/"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/"+(e.getDate()<10?"0"+e.getDate():e.getDate())},e.secondsToMonthDay=function(e){e=new Date(e);return e.getMonth()+1+""+e.getDate()+""},e.getDuration=function(){return Math.floor(window.performance.now())},e)),n._RF.pop()}}}),System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./EventType.ts","./GameUIConfig2.ts","./Logger.ts","./UIView.ts","./Utils.ts","./EventManager.ts","./TimeUtil.ts"],function(n){var i,a,c,r,u,h,o,d,p,g,f,m,_,v;return{setters:[function(e){i=e.createClass},function(e){a=e.cclegacy,c=e.resources,r=e.Prefab,u=e.instantiate,h=e.assetManager},function(e){o=e.DEBUG},function(e){d=e.EventType},function(e){p=e.UILayerType},function(e){g=e.Logger},function(e){f=e.UIView},function(e){m=e.default},function(e){_=e.EventMgr},function(e){v=e.TimeUtil}],execute:function(){a._RF.push({},"ae510QzCodDcpID+eN7Qtef","UIManager",void 0);(e=t.prototype).getValidBundle=function(e){return e||c},e.clearCache=function(){if(!(this.UIPrefabCache.size<=this.prefabMaxSize)){var n=[],i=Date.now();for(this.UIPrefabCache.forEach(function(e,t){0<e.closeTime&&3e5<i-e.closeTime&&n.push([t,e])}),n.sort(function(e,t){return e[1].closeTime-t[1].closeTime});this.UIPrefabCache.size>this.prefabMaxSize&&0<n.length;){var e=n.shift()[0];this.removeUIPrefabCache(e)}}},e.onUIOpen=function(e){var t=this;if(null!=e&&e.uiView){var n=e.uiView;try{n.passParam(e.uiArgs);var i=this.getShowLayerByType(e.showLayerType);i?(n.node.parent=i,n.node.setPosition(0,0),n.node.active=!0,n.scheduleOnce(function(){_.dispatchEvent(d.ONE_WIN_OPEN_COMPLE,e),t.debugMode&&m.showMenory(e.uiUrl+"_openUI")},.1)):g.error("Missing show layer for:",e.uiUrl)}catch(t){g.error("UI Open Error:",e.uiUrl,t)}}else this.debugMode&&g.warn("onUIOpen_UIInfo_error:",e)},e.getOrCreateUI=function(n,i){var a=this,o=null,o=null!=(i=void 0===i?null:i)?i:c,e=this.UIPrefabCache.get(o.name+"_"+n.uiUrl);e&&e.prefab&&e.prefab.data?(e.closeTime=-1,g.log("from_cachePrefabInfo:",n.uiUrl),this.loadedUIPrefab(n,e.prefab,i)):(this.clearCache(),g.log("start_load:",n.uiUrl,Date.now()-n.startTime),o.load(n.uiUrl,r,function(e,t){e?g.error("getOrCreateUI_error",n.uiUrl,e):(t.addRef(),a.UIPrefabCache.set(o.name+"_"+n.uiUrl,{prefab:t,closeTime:-1}),a.loadedUIPrefab(n,t,i))}))},e.loadedUIPrefab=function(e,t,n){void 0===n&&(n=null);for(var i=null,a=0,o=null,r=0;r<this.UIStack.length;r++){var s=this.UIStack[r];if(s.uiUrl===e.uiUrl&&s.bundleName===e.bundleName){i=s,a=r;break}}i?null==(o=null==(o=i.uiView?i.uiView.node:o)?u(t):o)?(g.warn("instantiate_error:",i.uiUrl),h.releaseAsset(t),this.UIPrefabCache.delete(i.bundleName+"_"+i.uiUrl),this.getOrCreateUI(i,n)):null==(n=o.getComponent(f))?(g.warn("UIView is null:",i.uiUrl),o.destroy(),h.releaseAsset(t),this.UIPrefabCache.delete(i.bundleName+"_"+i.uiUrl),this.UIStack.splice(a,1)):(n.UIid=i.uiId,(i.uiView=n).init(i.uiArgs),n.autoReleaseRes(t),this.onUIOpen(i)):g.warn("view_has_remove:",e.uiUrl)},e.getShowLayerByType=function(e){switch(e){case p.BACKGROUND_LAYER:return this.backgroundLayer;case p.MAIN_LAYER:return this.mainUILayer;case p.TIP_LAYER:return this.tipLayer;default:p.TOP_LAYER;return this.topLayer}},e.isOpen=function(e,t){for(var n=this.getBundleByName(e=void 0===e?null:e),i=0;i<this.UIStack.length;i++){var a=this.UIStack[i];if(a.uiId===t&&a.bundleName===n.name&&a.uiView)return!0}return!1},e.getBundleName=function(e){return e},e.getBundleByName=function(e){e=this.getBundleName(e);return this.gameBundleCache.get(e)||c},e.openBundleUI=function(e,n,i,a,o,t){var r=this,s=(void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=p.MAIN_LAYER),void 0===o&&(o=null),void 0===t&&(t=null),g.log("openBundleUI:",e,n,v.getDuration()),this.getBundleName(e)),e=this.gameBundleCache.get(s);e?(m.isEmpty(n)||this.open(n,i,e,a),o&&o()):h.loadBundle(s,t,function(e,t){null!=e?g.error("openBundleUI_error",s,e):(l.curGameBundle=t,r.gameBundleCache.set(s,t),e=v.getDuration(),g.log("openBundleUI_success",s,n,e),m.isEmpty(n)||r.open(n,i,t,a),o&&o())})},e.open=function(e,t,n,i){void 0===t&&(t=null),void 0===i&&(i=p.MAIN_LAYER);var a=e;n=(n=void 0===n?null:n)||c,null!=i&&void 0!==i||(i=p.MAIN_LAYER),g.log("startOpen:",n.name,a,i);for(var o=null,r=-1,s=0;s<this.UIStack.length;s++){var l=this.UIStack[s];if(l.uiUrl===a&&l.bundleName===n.name){o=l,r=s;break}}if(null!=o){if(g.log("UIStack_hasLoad:",a),o.uiArgs!==t&&(o.uiArgs=t),o.uiView)return o.uiView.node.parent||(u=this.getShowLayerByType(o.showLayerType),o.uiView.node.parent=u),g.log("ui_isOpen:",a),o.uiView.refreshWithArgs(o.uiArgs),o.uiView.node&&o.uiView.node.parent&&o.uiView.node.setSiblingIndex(o.uiView.node.parent.children.length-1),void _.dispatchEvent(d.ONE_WIN_OPEN_COMPLE,o);this.UIStack.splice(r,1)}var u={uiId:e,uiUrl:a,uiArgs:t,bundleName:n.name,uiView:null,showLayerType:i,startTime:Date.now()};this.UIStack.push(u),this.getOrCreateUI(u,n)},e.closeBundleUI=function(e,t){g.log("closeBundleUI",e,t);e=this.getBundleByName(e);this.close(t,e)},e.close=function(e,t){if(null!=e){t=t||c;for(var n,i="string"==typeof e||"number"==typeof e?e:e.UIid,a=null,o=0;o<this.UIStack.length;o++){var r=this.UIStack[o];if(r.uiId===i&&r.bundleName===t.name){a=r,this.UIStack.splice(o,1);break}}null==a||null==a.uiView?g.log("not_find_ui:",i,t.name,this.UIStack):(e=a.uiView,n=(g.log("close_ui:",i,e.name),e.unscheduleAllCallbacks(),null!=(n=e.node)&&n.removeFromParent(),e.closeTime=Date.now(),e.onAfterRemoveParent(),e.releaseAutoRes(),null!=(n=e.node)&&n.destroy(),this.UIPrefabCache.get(a.bundleName+"_"+a.uiUrl)),!e.isNeedCache()&&n&&(n.closeTime=e.closeTime),m.showMenory(a.uiUrl+"_close"))}},e.closeAllExcept=function(e){for(var t,n,i=null,a=!0,o=this.UIStack.length-1;0<=o;o--){if(i=this.UIStack[o],a=!0,e&&0<e.length)for(var r=0;r<e.length;r++){var s=e[r];i.uiId===s.uiId&&i.bundleName===s.bundleName&&(a=!1)}a&&(this.UIStack.splice(o,1),i=(null==i||null==i.uiView||(g.log("closeAllExcept_removeView(index,uiId,uiLayer)",o,null==i?void 0:i.uiId,i.showLayerType),(t=i.uiView).unscheduleAllCallbacks(),t.node.removeFromParent(),t.closeTime=Date.now(),t.onAfterRemoveParent(),t.releaseAutoRes(),t.node.destroy(),n=this.UIPrefabCache.get(i.bundleName+"_"+i.uiUrl),!t.isNeedCache()&&n&&(n.closeTime=t.closeTime)),null))}g.log("closeAllExcept_after",e,this.UIStack)},e.clearPrefabFromUIID=function(e,t){t=null!=(t=void 0===t?null:t)?t:c;this.removeUIPrefabCache(t.name+"_"+e)},e.removeUIPrefabCache=function(e){var t=this.UIPrefabCache.get(e);this.UIPrefabCache.delete(e),t&&(t.prefab.decRef(),g.log("removeUICache refCount:",e,t.prefab.refCount),t.prefab.refCount<=0)&&h.releaseAsset(t.prefab)},e.getIsOpenUIName=function(){for(var e=[],t=0;t<this.UIStack.length;t++){var n,i=this.UIStack[t];i.uiView&&null!=(n=i.uiView.node)&&n.parent&&e.push(i.uiId)}return e.toString()},e.preLoadViewPrefab=function(e,t){var n=this,i=e,a=null,a=null!=(t=void 0===t?null:t)?t:c;null==this.UIPrefabCache.get(a.name+"_"+i)&&a.load(i,r,null,function(e,t){e?g.error("preLoadViewPrefab_error",i,e):n.UIPrefabCache.get(a.name+"_"+i)||(t.addRef(),n.UIPrefabCache.set(a.name+"_"+i,{prefab:t,closeTime:-1}))})},i(t,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new t),this._instance}}]);var e=t;function t(){this.prefabMaxSize=t.DEFAULT_PREFAB_CACHE_SIZE,this.UIPrefabCache=new Map,this.UIStack=[],this.backgroundLayer=void 0,this.mainUILayer=void 0,this.tipLayer=void 0,this.topLayer=void 0,this.GameConf=null,this.curGameBundle=null,this.gameBundleCache=new Map,this.debugMode=o}e.DEFAULT_PREFAB_CACHE_SIZE=6,e._instance=null;var l=n("uiManager",e.instance);a._RF.pop()}}}),System.register("chunks:///_virtual/UIView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],function(n){var i,o,r,s,l,u,c;return{setters:[function(e){i=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,s=e.Tween,l=e.Node,u=e.Component},function(e){c=e.Logger}],execute:function(){o._RF.push({},"d7b30pvILtNSKp2c7V0+d3N","UIView",void 0);var a,e=r.ccclass;function t(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))||this).UIid=0,e.autoRes=[],e._data=null,e._needCache=!1,e._hasOnload=!1,e._clickMap=new Map,e.closeTime=-1,e._eventNodeList=[],e}r.property,n("UIView",e((i(t,a=u),(e=t.prototype).init=function(e){},e.start=function(){this.updateUIView(),this._hasOnload=!0},e.onEnable=function(){},e.onDisable=function(){s.stopAllByTarget(this.node),this.clearEventHandle()},e.onDestory=function(){this.unscheduleAllCallbacks()},e.onAfterRemoveParent=function(){},e.passParam=function(e){this._data=e},e.refreshWithArgs=function(e){this._data=e,this.isValid&&this._hasOnload&&this.updateUIView()},e.updateUIView=function(){},e.releaseAutoRes=function(){for(var e=0;e<this.autoRes.length;e++)this.autoRes[e].decRef()},e.autoReleaseRes=function(e){e.addRef(),this.autoRes.push(e)},e.setNeedCache=function(e){this._needCache=e},e.isNeedCache=function(){return this._needCache},e.addClickEventHandle=function(e,t){e?(e.on(l.EventType.TOUCH_END,t,this),this._eventNodeList.push(e)):c.warn("addClickEventHandle node is null!",null==t?void 0:t.name)},e.removeClickEventHandle=function(e,t){if(e){e.off(l.EventType.TOUCH_END,t,this);for(var n=0;n<this._eventNodeList.length;n++)if(this._eventNodeList[n].uuid===e.uuid){this._eventNodeList.splice(n,1);break}}else c.warn("removeClickEventHandle node is null!",null==t?void 0:t.name)},e.addMoveEventHandle=function(e,t,n,i){null!=t&&e.on(l.EventType.TOUCH_START,t,this),null!=n&&e.on(l.EventType.TOUCH_MOVE,n,this),null!=i&&(e.on(l.EventType.TOUCH_END,i,this),e.on(l.EventType.TOUCH_CANCEL,i,this)),this._eventNodeList.push(e)},e.clearEventHandle=function(){for(var e=0;e<this._eventNodeList.length;e++){var t=this._eventNodeList[e];t&&t.isValid&&t.targetOff(this)}this._eventNodeList=[]},e.isClicking=function(e,t){void 0===t&&(t=1);var n=this._clickMap.get(e),i=Date.now();return!n||1e3*t<i-n?(this._clickMap.set(e,i),!1):(c.log("isClicking",e,i-n),!0)},e=t))||e),o._RF.pop()}}}),System.register("chunks:///_virtual/UrlDataUtil.ts",["cc"],function(t){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"bc629J1folOUJKIH3gm/5p5","UrlDataUtil",void 0);var e=t("default",(a.getQueryValue=function(e,t,n){var i,t=null!=t?t:a.getCachedSearchString();return t&&((i=this.queryRegCache.get(e))||(i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),this.queryRegCache.set(e,i)),e=t.substring(1).match(i))?(t=decodeURIComponent(e[2]),n?n(t):t):null},a.getCachedSearchString=function(){var e;return this.cachedSearchString||(this.cachedSearchString=(null==(e=window)||null==(e=e.location)?void 0:e.search)||null),this.cachedSearchString},a.isHttps=function(){var e;return void 0===this._isHttps&&(e=null==(e=window)||null==(e=e.location)?void 0:e.protocol,this._isHttps="https:"===e||"porxys:"===e),this._isHttps},a));function a(){}e.queryRegCache=new Map,e.cachedSearchString=null,e._isHttps=void 0,n._RF.pop()}}}),System.register("chunks:///_virtual/Utils.ts",["cc","./LanguageData.ts"],function(e){var t,n,o,l,u,i,a,r,s,c,d,p;return{setters:[function(e){t=e.cclegacy,n=e.sys,o=e.Tween,l=e.tween,u=e.Vec3,i=e.Intersection2D,a=e.UITransform,r=e.rect,s=e.v2,c=e.director,d=e.screen},function(e){p=e.LanguageData}],execute:function(){function h(){}t._RF.push({},"f6966tySkNHMK6ZZQfQWxVh","Utils",void 0),e("default",(h.isEmpty=function(e){return null==e||""===e||void 0===e},h.isJsonString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},h.isNative=function(){return this.isAndroid()||this.isIos()},h.isAndroid=function(){return n.os===n.OS.ANDROID||n.os===n.OS.LINUX},h.isIos=function(){return n.os===n.OS.IOS},h.platform=function(){return this.isAndroid()?"Android":this.isIos()?"iOS":"Web"},h.isAudio=function(e){return null!=e&&""!==e&&(-1<e.indexOf(".mp3")||-1<e.indexOf(".wav"))},h.isVideo=function(e){return null!=e&&""!==e&&-1<e.indexOf(".mp4")},h.isVersonLarge=function(e,t,n,i,a){if(void 0===a&&(a=null),!1!==this.isNative()){var o=a,r=(null==a&&(o=i),e.split(".")),s=null;h.isAndroid()?s=n.split("."):h.isIos()&&(s=("inHouse"===t?o:i).split("."));for(var l=0;l<r.length;l++){var u=parseInt(r[l],10),c=parseInt(s[l],10);if(c<u)return!0;if(u<c)return!1}}return!1},h.scaleYoyoTargetWithTimes=function(e,t,n,i){void 0===t&&(t=1.2),void 0===n&&(n=.4),void 0===i&&(i=0),o.stopAllByTarget(e);var a=e.scale.x;(0<i?l(e).repeat(i,l().sequence(l().to(n,{scale:a*t}),l().to(n,{scale:a}))):l(e).repeatForever(l().sequence(l().to(n,{scale:a*t}),l().to(n,{scale:a})))).start()},h.random=function(e,t){var n=e,i=t=void 0===t?null:t;return null==t&&(i=e,n=0),Math.floor(n+Math.random()*(i-n+1))},h.scaleItemsOnce=function(e,t){void 0===t&&(t=null);for(var n=e.length,i=function(){--n<=0&&t&&t.call(null)},a=0;a<e.length;a++){var o=e[a],r=o.scale,s=o.scale.add(new u(.1,.1,.1));l(o).to(.2,{scale:r},{easing:"cubicInOut"}).to(.2,{scale:s},{easing:"cubicInOut"}).call(i).start()}},h.splitToNumbers=function(e,t){var n;return void 0===t&&(t=","),"number"==typeof e?[e]:this.isEmpty(e)?[]:(n=[],e.split(t).forEach(function(e){n.push(Number(e))}),n)},h.shuffle=function(e){for(var t=e.length;t;){var n=Math.floor(Math.random()*t--),i=[e[t],e[n]];e[n]=i[0],e[t]=i[1]}return e},h.getDistance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},h.disorganize=function(e){for(var t=e.length-1;0<=t;t--){var n=Math.floor(Math.random()*(t+1)),i=e[n];e[n]=e[t],e[t]=i}},h.checkIntersects=function(e,t){return null!=e&&null!=t&&(e=this.getRectAllPoint(e),t=this.getRectAllPoint(t),i.polygonPolygon(e,t))},h.getRectAllPoint=function(e){var t=e.getPosition(),n=e.getComponent(a),n=r(t.x-n.width*n.anchorX*e.scale.x,t.y-n.height*n.anchorY*e.scale.y,n.width*e.scale.x,n.height*e.scale.y);return[this.calcNewPoint(s(n.x,n.y),t,e.angle),this.calcNewPoint(s(n.x+n.width,n.y),t,e.angle),this.calcNewPoint(s(n.x+n.width,n.y+n.height),t,e.angle),this.calcNewPoint(s(n.x,n.y+n.height),t,e.angle)]},h.calcNewPoint=function(e,t,n){var n=n*Math.PI/180,i=Math.cos(n),n=Math.sin(n),a=(e.x-t.x)*i-(e.y-t.y)*n+t.x;return s(a,(e.x-t.x)*n+(e.y-t.y)*i+t.y)},h.getBoundingBoxToWorld=function(e){return e.getComponent(a).getBoundingBoxToWorld()},h.getI18nString=function(e){return p.instance.translate(e)},h.subName=function(e,t){return void 0===t&&(t=5),e&&e.length<=t?e:h.isPureArabic(e)?"..."+e.substring(0,t):e.substring(0,t)+"..."},h.isPureArabic=function(e){return!!e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\s]+$/.test(e)},h.getPointRotation=function(e,t){var n=t.worldPosition.x-e.worldPosition.x,t=t.worldPosition.y-e.worldPosition.y;return 180*Math.atan2(t,n)/Math.PI-90},h.utf8_to_b64=function(e){return window.btoa(unescape(encodeURIComponent(e)))},h.b64_to_utf8=function(e){return decodeURIComponent(escape(window.atob(e)))},h.showMenory=function(e){var t=Math.floor(c.root.device.memoryStatus.textureSize/1048576*100)/100;console.log(e,"_textureSize:",t)},h.getTopArea=function(){var e=null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent;if(e){e=e.match(/topArea\/(\d+)/);if(e&&1<e.length)return Number(e[1])*d.devicePixelRatio}return 0},h.getBottomArea=function(){var e=null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent;if(e){e=e.match(/bottomArea\/(\d+)/);if(e&&1<e.length)return Number(e[1])*d.devicePixelRatio}return 0},h)),t._RF.pop()}}}),System.register("chunks:///_virtual/WebSocketBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventType.ts","./GlobalContext.ts","./Logger.ts","./EventManager.ts"],function(n){var i,a,o,r,s,l;return{setters:[function(e){i=e.createClass},function(e){a=e.cclegacy},function(e){o=e.EventType},function(e){r=e.globalContext},function(e){s=e.Logger},function(e){l=e.EventMgr}],execute:function(){function e(){this._webSocket=void 0,this._webUrl=void 0,this._oldConnectTime=0,this._oldMessageTime=0,this._timerID=0,this.heartTime=7e3,this.canSendMsg=!1,this.isSending=!1,this._onMessageCallbackFun=null,this._onMessageCallbackObj=null,this._msgQueues=[]}var t;a._RF.push({},"15324ND19RHY5B6Dyf3rgi8","WebSocketBase",void 0),n("WebSocketBase",((t=e.prototype).clearSocket=function(){!this._webSocket||this._webSocket.readyState!==WebSocket.OPEN&&this._webSocket.readyState!==WebSocket.CONNECTING||this._webSocket.close(),this._webSocket=null,this._webUrl=null,this.canSendMsg=!1,this.isSending=!1,this._oldConnectTime=0,(this._oldMessageTime=0)<this._timerID&&window.clearInterval(this._timerID)},t.clearMsgQueues=function(){this._msgQueues=[]},t.on_open=function(e){s.log("on_open ----------",this._webSocket.url,this._webSocket.readyState),this._oldMessageTime=Date.now(),this.canSendMsg=!0,this.clearMsgQueues(),l.dispatchEvent(o.SOCKET_ON_OPEN)},t.on_message=function(e){this._oldMessageTime=Date.now(),this._onMessageCallbackFun&&this._onMessageCallbackFun.call(this._onMessageCallbackObj,e.data)},t.on_close=function(e){this.canSendMsg=!1,s.log("on_close ----------",e)},t.on_error=function(e){this.canSendMsg=!1,s.error("webSocket_on_error:",r.WebSocketAddress,r.channelId,"_errorMsg:",null==e?void 0:e.type)},t.setHearTimer=function(e){0<this._timerID&&(clearInterval(this._timerID),this._timerID=0),this._timerID=window.setInterval(this.timerHandler.bind(this,e),e/4)},t.timerHandler=function(e){var t=Date.now();0<this._oldMessageTime?t-this._oldMessageTime>e&&(s.warn("timeHandle id_len_oldMessage",this._timerID,e,t-this._oldMessageTime),this.connect(this._webUrl)):t-this._oldConnectTime>e&&(s.warn("timeHandle id_len_oldConnect",this._timerID,e,t-this._oldConnectTime),this.connect(this._webUrl))},t.setOnMessageCallback=function(e,t){this._onMessageCallbackFun=t,this._onMessageCallbackObj=e},t.connect=function(e){this.clearSocket(),e&&(this._webUrl=e),this.setHearTimer(this.heartTime);var t=Date.now();this._oldConnectTime=t,s.log("connect ----------",e);try{this._webSocket=new WebSocket(this._webUrl,[]),this._webSocket.binaryType="arraybuffer",this._webSocket.onopen=this.on_open.bind(this),this._webSocket.onmessage=this.on_message.bind(this),this._webSocket.onclose=this.on_close.bind(this),this._webSocket.onerror=this.on_error.bind(this)}catch(e){s.error("socket_connect",e)}},t.startSendMessage=function(e){var t=this;if(this.isSending)e&&e("isSending");else if(this._webSocket)if(this._webSocket.readyState===WebSocket.OPEN){var n=null;try{for(;0<this._msgQueues.length&&this.canSendMsg;)this.isSending=!0,n=this._msgQueues.shift(),this._webSocket.send(n.dataObj);this.isSending=!1}catch(t){s.error("sendError",t),this.canSendMsg=!1,this.isSending=!1,n&&(this.addDataToQueues(n),n=null),e&&e(t)}}else this._webSocket.readyState===WebSocket.CONNECTING?(this.isSending=!0,setTimeout(function(){t.isSending=!1,t.startSendMessage()},1)):(this.isSending=!1,this.canSendMsg=!1)},t.addDataToQueues=function(e){this._msgQueues.push(e),this._msgQueues.sort(function(e,t){return e.sendTime-t.sendTime})},t.socketIsReady=function(){return!(!this._webSocket||this._webSocket.readyState!==WebSocket.OPEN&&this._webSocket.readyState!==WebSocket.CONNECTING||!this.canSendMsg)},i(e,[{key:"instance",get:function(){return e._instance=null==e._instance?new e:e._instance}}]),e))._instance=null,a._RF.pop()}}}),System.register("chunks:///_virtual/WindowFunctionManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],function(t){var n,i;return{setters:[function(e){n=e.createClass},function(e){i=e.cclegacy}],execute:function(){function e(){}i._RF.push({},"a6656Jgs3RCaKJCO5ccnmsM","WindowFunctionManager",void 0),t("WindowFunctionManager",(e.prototype.initFunctionToParent=function(){window.parent&&(window.FunAsyncJSBridgeCallback&&(window.parent.FunAsyncJSBridgeCallback=window.FunAsyncJSBridgeCallback),window.game)&&(window.parent.game=window.game)},n(e,null,[{key:"Instance",get:function(){return this.instance||(this.instance=new e),this.instance}}]),e)).instance=null,i._RF.pop()}}}),(()=>{var e,t;e="virtual:///prerequisite-imports/main",t="chunks:///_virtual/main",System.register(e,[t],function(i,e){return{setters:[function(e){var t,n={};for(t in e)"default"!==t&&"__esModule"!==t&&(n[t]=e[t]);i(n)}],execute:function(){}}})})();